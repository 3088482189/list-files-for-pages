<div id="content-right" class='right-body'>
    <script src="/add/jq.js"></script>

    <!-- markdown katex-->
	<link rel="stylesheet" href="/add/markdown2.css" />
	<script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.css"
		integrity="sha384-zB1R0rpPzHqg7Kpt0Aljp8JPLqbXI3bhnPWROx27a9N0Ll6ZP/+DiW/UqRcLbRjq" crossorigin="anonymous">
	<script defer src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.js"
		integrity="sha384-y23I5Q6l+B6vatafAwxRu/0oK/79VlbSz7Q9aiSZUvyWYIYsd+qj+o24G5ZU2zJz"
        crossorigin="anonymous"></script>
    <script>
        function md_turn(input, output) {
			var text = window.document.getElementById(input).value.trim(), res = "";
			var list = text.split("$$");
			var tmp = "";
			for (i in list) {
				if (i & 1) res += katex.renderToString(list[i], { displayMode: true });
				else {
					var LIST = list[i].split('$'), now = "";
					for (j in LIST) {
						if (j & 1) now += '<latex>' + katex.renderToString(LIST[j]) + '</latex>';
						else now += LIST[j];
					}
					res += marked(now);
				}
			}
			window.document.getElementById(output).innerHTML = res;
		}
    </script>

    <!--highlight-->
    <link rel="stylesheet" href="/add/github.min.css">
    <script src="/add/highlight.min.js"></script>
    <script src="/add/highlightjs-line-numbers.min.js"></script>
    <script src="/add/highlightjs-copy-button.min.js"></script>
    <!--highlight end-->

    <div class="mdui-subheader-inset">preview--(support markdown and code)</div>
    <a id="preview-raw" href="" style="display: none;">
        <li class="mdui-list-item">
            <i class="mdui-list-item-icon mdui-color-white"><img src="/add/icon/download.svg"></i>
            <div id='download_file_name' class="mdui-list-item mdui-text-color-black">下载</div>
        </li>
    </a>

    <textarea id="md_source" style="display: none;"></textarea>
    <div id="md_out"></div>
    <div id="loading" style="display: none;">loading...</div>
    <script>
        function viewmd(file) {
            var link = new XMLHttpRequest();
            $('#download_file_name').html("下载"+file)
            $('#preview-raw').attr('href', file);
            $('#preview-raw').hide()
            link.onreadystatechange = function () {
                $('#md_out').hide();
                $('#loading').show()
                $('#preview-raw').show()
                if (link.readyState == 4) {
                    if(link.responseText.length<=102400)
                        $('#md_source').html(link.responseText);
                    else $('#md_source').html(link.responseText.substr(0,102400)+"\n\n ### 文件过大,请下载查看");
                    md_turn('md_source', 'md_out');
                    $('pre code').each(function (i, block) {
                        hljs.highlightBlock(block);
                    });
                    hljs.initCopyButtonOnLoad();
                    hljs.initLineNumbersOnLoad();
                    console.log('done');
                    $('#loading').hide()
                    $('#md_out').show();
                }
            }
            link.open('GET', file, true);
            link.send();
        }

        function viewcode(typ, file) {
            var link = new XMLHttpRequest();
            $('#download_file_name').html("下载"+file)
            $('#preview-raw').attr('href', file);
            $('#preview-raw').hide()
            link.onreadystatechange = function () {
                $('#md_out').hide();
                $('#loading').show()
                $('#preview-raw').show()
                if (link.readyState == 4) {
                    if(link.responseText.length<=204800)
                    $('#md_source').html("```" + typ + "\n" + link.responseText + "\n```\n");
                    else $('#md_source').html("```" + typ + "\n" + link.responseText.substr(0,204800) + "\n```\n文件较大,请下载查看");
                    md_turn('md_source', 'md_out');
                    $('pre code').each(function (i, block) {
                        hljs.highlightBlock(block);
                    });
                    hljs.initCopyButtonOnLoad();
                    hljs.initLineNumbersOnLoad();
                    console.log('done');
                    $('#loading').hide()
                    $('#md_out').show();
                }
            }
            link.open('GET', file, true);
            link.send();
        }

        function filter() {
            $(".obj").each(function () {
                $(this).show();
            });
            var arr = $('#filter_input').val().split('|');
            $.each(arr, function (index, text) {
                text = text.toLowerCase()
                $(".obj").each(function () {
                    if ($(this).html().toLowerCase().indexOf(text) == -1)
                        $(this).hide();
                });
            });
        }
        $('#filter_input').change(function () {
            filter();
        });

        var is_filter_textfield_hide = 1,is_search_textfield_hide=1;
        function view_filter_textfield() {
            if (is_filter_textfield_hide) $('#filter_textfield').show();
            else $('#filter_textfield').hide();
            is_filter_textfield_hide ^= 1;
        }
        function view_search_textfield() {
            if (is_search_textfield_hide) $('#search_textfield').show();
            else $('#search_textfield').hide();
            is_search_textfield_hide ^= 1;
        }
        $('#path').click(function(){
            $(this).animate({scrollLeft: $(this).scrollLeft()+$('.mdui-toolbar').width()/3},1000)
        });
        function search(){
            link="/search.html?dir="+escape($('subtitle').html())+"&text="+escape($('#search_input').val());
            console.log(link);
            window.open(link);
        }
        $('#search_input').change(function () {
            search();
        });
    </script>
</div>

<style>
    #content-left {
        text-align: left;
        width: 30%;
        height: 100%;
        float: left;
        clear: left;
        position: fixed;
        left: 0;
        top: 0;
        overflow-x: scroll;
        overflow-y: scroll;
    }

    #content-right {
        text-align: left;
        width: 70%;
        height: 100%;
        float: right;
        clear: right;
        position: fixed;
        top: 0;
        right: 0;
        overflow-x: scroll;
        overflow-y: scroll;
    }

    /* chrome */
    .left-body::-webkit-scrollbar,#path::-webkit-scrollbar{
        display: none;
    }
    /* firefox */
    .left-body,#path{
        scrollbar-color: transparent transparent;
        scrollbar-track-color: transparent;
        -ms-scrollbar-track-color: transparent;
    }
</style>

<!-- 鼠标点击特效 -->
<script type="text/javascript" src="/add/mouse.js"></script>

<!--custom-->
<link rel="stylesheet" href="/add/custom.css" type="text/css">